<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>WASM Embedded</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="dist/reveal.css">
        <link rel="stylesheet" href="dist/theme/white.css" id="theme">
        <link rel="stylesheet" href="plugin/highlight/monokai.css">

        <link rel="stylesheet" href="style.css">

        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="plugin/chalkboard/style.css">
        <link rel="stylesheet" href="plugin/customcontrols/style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    </head>

    <body>

        <div class="reveal" >
            <div class="slides">

                <section data-auto-animate>
                    <span class="menu-title" style="display: none">Overview</span>
                    <h3 class="r-fit-text">WASM on Embedded Systems (RTOS)</h3>
                    <h5 class="text-end">Real-Time Operating System</h5>
                    <br />
                    <br />
                    <p class="name" style="font-size: 25px;">Han Wu, University of Exeter, the UK</p>
                    <!-- <div class="r-hstack">
                        <div>
                            <a href="https://wuhanstudio.cc">
                              <img align="center" width=55% src="https://github-readme-stats.wuhanstudio.vercel.app/api?username=wuhanstudio&include_all_commits=true&show_icons=true&hide=issues&count_private=true" />
                            </a>
                            <a href="https://wuhanstudio.uk">
                              <img align="center" width=40% src="https://github-readme-stats.wuhanstudio.vercel.app/api/top-langs/?username=wuhanstudio&layout=compact&langs_count=6" />
                            </a>
                        </div>
                    </div> -->
                    <p style="font-size: 22px;"><i class="fab fa-github"></i> &nbsp; <a href="https://github.com/wuhanstudio/wasm-embedded">Source Code</a></p>

                    <aside class="notes">
                        Hi, I'm a Ph.D. student at University of Exeter, in the UK. I'll show you how to use Web Assembly, or WASM, on Embedded Systems that use Real-Time Operating System. Mybe it's more intuitive to show you a quick demo.
                    </aside>
                </section>

                <section data-background-video="images/demo.mp4" data-background-video data-background-video-muted data-menu-title="Demo Project">
                    <aside class="notes">
                        The same WASM code runs on different platforms. But how?
                    </aside>
                </section>

                <section>
                    <div class="row">
                        <div class="col col-3">
                            <img src="images/opencv.jpg" />
                        </div>
                        <div class="col col-3 fragment" data-fragment-index="2">
                            <img src="images/arrow.jpg" />
                        </div>
                        <div class="col col-3 fragment" data-fragment-index="2">
                            <img src="images/wasm-code.jpg" style="margin-left: 0; margin-right: 0;" />
                        </div>
                        <div class="col col-3 fragment" data-fragment-index="1">
                            <img src="images/browser.jpg" style="margin-left: 0; margin-right: 0;"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col col-3">
                            <p style="font-size: 26px;">C/C++ Libraries <br/> (OpenCV, Eigen, etc)</p>
                        </div>
                        <div class="col col-3"></div>
                        <div class="col col-6 fragment" data-fragment-index="3">
                            <p style="font-size: 26px; border: 1px  solid black; padding: 10px;">Chrome V8 (WASM Runtime)</p>
                        </div>
                    </div>
                    <aside class="notes">
                        WebAssembly was designed for browsers. Before we have WebAssembly, web browsers only recognize JavaScript code. But some of the most popular libraries, such as OpenCv, were written in C/C++. We can't just use these libraries for web applications. 
                        <br/>
                        <br/>
                        To solve this problem, we have WebAssembly. We can first compile C/C++ libraries to WASM code, and the browser provides a WASM runtime, so that we can use these libraries for web applications. This is how we use WASM in the browser. You may ask, how about embedded systems?
                    </aside>
                </section>

                <section>
                    <div class="row">
                        <div class="col col-5">
                            <div class="row">
                                <div class="col col-6">
                                    <img src="images/wasm-code.jpg" class="m-zero"/>
                                </div>
                                <div class="col col-6">
                                    <img src="images/dino.jpg" class="m-zero"/>
                                </div>
                            </div>
                            <div class="row">
                                <p style="font-size: 24px; border: 1px  solid black; padding: 5px;" class="m-zero">Chrome  (V8 Runtime)</p>
                            <p style="font-size: 18px;">Intel i7 (1.9GHz) - 16GB RAM</p>
                        </div>
                        </div>

                        <div class="col col-2"></div>

                        <div class="col col-5">
                            <div class="row">
                                <div class="col col-6">
                                    <img src="images/wasm-code.jpg" class="m-zero fragment" data-fragment-index="2"/>
                                </div>
                                <div class="col col-6">
                                    <img src="images/arm-linux.gif" class="m-zero fragment" data-fragment-index="3"/>
                                </div>
                            </div>
                            <div class="row">
                                <p style="font-size: 24px; border: 1px  solid black; padding: 5px;" class="m-zero fragment" data-fragment-index="2">ARM Linux (WASM3 Runtime)</p>
                                <p style="font-size: 18px;" class="fragment" data-fragment-index="1">Cortex-A7 (1.2GHz) -  64MB RAM</p>
                            </div>
                        </div>
                    </div>

                    <br />

                    <div class="row">
                        <div class="col col-5">
                            <div class="row">
                                <div class="col col-6">
                                    <img src="images/wasm-code.jpg" class="m-zero fragment" data-fragment-index="5"/>
                                </div>
                                <div class="col col-6">
                                    <img src="images/rt-thread.gif" class="fragment" data-fragment-index="6"/>
                                </div>
                                <div class="col col-3">

                                </div>
                            </div>
                            <div class="row">
                            <p style="font-size: 24px; border: 1px  solid black; padding: 5px;" class="m-zero fragment" data-fragment-index="5">RT-Thread (WAMR Runtime)</p>
                            <p style="font-size: 18px;" class="fragment" data-fragment-index="4">Cortex-M4 (120MHz) - 640KB RAM</p>
                        </div>
                        </div>

                        <div class="col col-2"></div>

                        <div class="col col-5 fragment">
                            <div class="row">
                                <div class="col col-6">
                                    <img src="images/wasm-code.jpg" class="m-zero"/>
                                </div>
                                <div class="col col-6">
                                    <img src="images/esp32.gif" class="m-zero"/>
                                </div>
                                <div class="col col-3">

                                </div>
                            </div>
                            <div class="row">
                            <p style="font-size: 24px; border: 1px  solid black; padding: 5px;" class="m-zero">Arduino (WASM3 Runtime)</p>
                            <p style="font-size: 18px;">ESP32 (240MHz) - 520KB RAM</p>
                            </div>
                        </div>
                    </div>

                    <aside class="notes">
                        Embedded Systems have very limited hardware resources. For example, a web browser may consume a lot of memory and CPU resources. For a laptop, it is very common to have 16GB of memory. What if we only have 64MB of memory and a slower ARM CPU. In this case, we need a different WASM runtime, which runs on ARM Linux and does not need a browser. Now, we can run the same WASM code on ARM Linux, or Embedded Linux.
                        <br />
                        <br />
                        However, ARM Linux is still Linux, what if we only have 640KB of Memory? We don't even have sufficient memory to run Linux. And the CPU is so much slower, it runs at 120MHz, rather than 1.2GHz. To solve this problem, we have WASM Micro-Runtime that runs on Real-time Operating System, such as Zephyr, RT-Thread, FreeRTOS, etc. Now we have WASM on Embedded Systems. For this demo application, I used RT-Thread, an open-source Real-time Operating System.
                        <br />
                        <br />
                        And the last one, Arduino, which is an open-source hardware and sorftware platform. We can run WASM on even smaller devices.
                        <br />
                        <br />
                        This is how we use WASM on different platforms. Basically, we use different WASM runtime to run the WASM code.
                    </aside>
                </section>

                <section>
                    <div class="row">
                        <div class="col col-4 text-end">
                            <br />
                            <img src="images/gui.jpg" width="50%" class="m-zero fragment" data-fragment-index="1">
                            <p style="font-size: 18px;" class="m-zero fragment" data-fragment-index="1">GUI (HDMI, LCD)</p>
                            <p style="font-size: 18px;" class="m-zero">&nbsp;</p>
                            <p style="font-size: 18px;" class="m-zero fragment" data-fragment-index="2">wasi-filesystem</p>
                            <p style="font-size: 18px;" class="m-zero fragment" data-fragment-index="3">wasi-sockets</p>
                            <p style="font-size: 18px;" class="m-zero">&nbsp;</p>
                            <p style="font-size: 18px;" class="m-zero fragment" data-fragment-index="4">wasi-digital-io</p>
                            <p style="font-size: 18px;" class="m-zero fragment" data-fragment-index="5">wasi-i2c</p>
                            <p style="font-size: 18px;" class="m-zero fragment" data-fragment-index="6">wasi-spi</p>
                        </div>
                        <div class="col col-4">
                            <br />
                            <img src="images/wasi.jpg" alt="" srcset="">
                        </div>
                        <div class="col col-4">
                            <img src="images/language.jpg" width="90%" class="fragment" data-fragment-index="8">
                        </div>
                    </div>
                    <a href="https://github.com/WebAssembly/WASI/blob/main/Proposals.md"><p style="font-size: 22px;" class="m-zero fragment" data-fragment-index="7">Web Assembly System Interface (WASI) Support</p></a>
                    <div class="row">
                        <div class="col col-2"></div>
                        <div class="col col-8">
                            <img src="images/summary.png" alt="" srcset="" class="fragment">
                        </div>
                        <div class="col col-2"></div>
                    </div>

                    <aside class="notes">
                        If we look at the WASM code. Basically, it performs some computation and stores the data to the memory. If we send the memory to a screen, we see the image. But for embedded systems, comprated with the Graphic User Interface, we care more about access to the hardware, such as the filesystem, web sockets, gpio, i2c and spi communication bus, so that we can interact with different sensors. This is one of the major differences between using WASM in the browser and WASM on embedded systems. For embedded systems, we need access to the low-level hardware.
                        <br />
                        <br />
                        This problem can be solved using WASM System Interface, or WASI.
                        <br />
                        <br />
                        Another benefit of using WASM is that it supports different programming languages. For example, we can compile C/C++, Rust and Golang to WASM code. We can use different programming languages to develop WASM applications.
                        <br />
                        <br />
                        Here's a summary of the hardware, runtime, and programming languages I used in this project.
                    </aside>
                </section>

                <!-- <section>
                    <p>Should we start using WASM now?</p>
                </section> -->

                <section>
                    <h2>Thanks</h2>
                    <div class="r-vstack">
                        <p><a href="https://wasm-embedded.wuhanstudio.uk/">https://wasm-embedded.wuhanstudio.uk</a></p>
                    </div>
                    <img src="images/qrcode.png" width="25%" />
                    <p style="font-size: 22px;"><i class="fab fa-github"></i> &nbsp; <a href="https://github.com/wuhanstudio/wasm-embedded">Source Code</a></p>

                    <aside class="notes">
                        You can find the source code on GitHub and more information about related projects. If you scan the QR code, you can find talk slides and links to the source code. Thank you. This is the end of my presentation.
                    </aside>
                </section>

            </div>
        </div>

        <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> -->

        <script src="dist/reveal.js"></script>
        <script src="plugin/chalkboard/plugin.js"></script>
        <script src="plugin/customcontrols/plugin.js"></script>
        <script src="plugin/menu/menu.js"></script>
        <script src="plugin/math/math.js"></script>
        <script src="plugin/highlight/highlight.js"></script>

        <script>
            Reveal.initialize({
                center: true,
                hash: true,
                plugins: [ RevealHighlight, RevealMath, RevealMenu, RevealChalkboard, RevealCustomControls ],
                mathjax: 'https://cdn.jsdelivr.net/gh/mathjax/mathjax@2.7.8/MathJax.js',
                config: 'TeX-AMS_HTML-full',
                // pass other options into `MathJax.Hub.Config()`
                TeX: { Macros: { RR: "{\\bf R}" } },
                menu: {
                    hideMissingTitles: true,
                },
                chalkboard: {
                    boardmarkerWidth: 3,
                    chalkWidth: 7,
                    chalkEffect: 1.0,
                    storage: null,
                    src: null,
                    readOnly: undefined,
                    transition: 800,
                    theme: "chalkboard",
                    background: [ 'rgba(127,127,127,.1)' , path + 'img/blackboard.png' ],
                    grid: { color: 'rgb(50,50,10,0.5)', distance: 80, width: 2},
                    eraser: { src: path + 'img/sponge.png', radius: 20},
                    boardmarkers : [
                            { color: 'rgba(100,100,100,1)', cursor: 'url(' + path + 'img/boardmarker-black.png), auto'},
                            { color: 'rgba(30,144,255, 1)', cursor: 'url(' + path + 'img/boardmarker-blue.png), auto'},
                            { color: 'rgba(220,20,60,1)', cursor: 'url(' + path + 'img/boardmarker-red.png), auto'},
                            { color: 'rgba(50,205,50,1)', cursor: 'url(' + path + 'img/boardmarker-green.png), auto'},
                            { color: 'rgba(255,140,0,1)', cursor: 'url(' + path + 'img/boardmarker-orange.png), auto'},
                            { color: 'rgba(150,0,20150,1)', cursor: 'url(' + path + 'img/boardmarker-purple.png), auto'},
                            { color: 'rgba(255,220,0,1)', cursor: 'url(' + path + 'img/boardmarker-yellow.png), auto'}
                    ],
                    chalks: [
                            { color: 'rgba(255,255,255,0.5)', cursor: 'url(' + path + 'img/chalk-white.png), auto'},
                            { color: 'rgba(96, 154, 244, 0.5)', cursor: 'url(' + path + 'img/chalk-blue.png), auto'},
                            { color: 'rgba(237, 20, 28, 0.5)', cursor: 'url(' + path + 'img/chalk-red.png), auto'},
                            { color: 'rgba(20, 237, 28, 0.5)', cursor: 'url(' + path + 'img/chalk-green.png), auto'},
                            { color: 'rgba(220, 133, 41, 0.5)', cursor: 'url(' + path + 'img/chalk-orange.png), auto'},
                            { color: 'rgba(220,0,220,0.5)', cursor: 'url(' + path + 'img/chalk-purple.png), auto'},
                            { color: 'rgba(255,220,0,0.5)', cursor: 'url(' + path + 'img/chalk-yellow.png), auto'}
                    ]
                },
                customcontrols: {
                    controls: [
                        { icon: '<i class="fa fa-pen-square"></i>',
                        title: 'Toggle chalkboard (B)',
                        action: 'RevealChalkboard.toggleChalkboard();'
                        },
                        { icon: '<i class="fa fa-pen"></i>',
                        title: 'Toggle notes canvas (C)',
                        action: 'RevealChalkboard.toggleNotesCanvas();'
                        }
                    ]
                },
                // showNotes: true,
            });
        </script>
    </body>
</html>
